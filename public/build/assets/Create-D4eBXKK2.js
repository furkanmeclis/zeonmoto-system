import{O as H,r as h,P as Ee,U as Ie,c as K,I as ke,D as A,R as He,j as a}from"./app-BkMiysKE.js";import{D as Oe}from"./dialog.esm-DIbkx5_d.js";import{I as re}from"./inputtext.esm-B-_xjB64.js";import{u as De}from"./formik.esm-DororHcK.js";import{C as Re,D as te}from"./dropdown.esm-D0mmLiW5.js";import{I as Ke}from"./inputnumber.esm-DXmjP5N0.js";import{C as Z}from"./checkbox.esm-BWjyYddF.js";import{D as ne}from"./divider.esm-E98pEgEx.js";import{B as W}from"./button.esm-tPdTyaqG.js";import{C as ie,u as Fe,a as Ue,d as Le}from"./tooltip.esm-D98gGTBH.js";import{C as ze}from"./index.esm-BPFc6-I0.js";import{C as Be}from"./index.esm-CstXhbmE.js";import{I as $e}from"./image.esm-3O0SvM8S.js";import"./index.esm-Ds1AQ0um.js";import"./overlayservice.esm-DFBgVv3U.js";import"./index.esm-D_QygwOb.js";function B(){return B=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(r[l]=n[l])}return r},B.apply(null,arguments)}function q(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,l=Array(t);n<t;n++)l[n]=r[n];return l}function Me(r){if(Array.isArray(r))return q(r)}function Ye(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function se(r,t){if(r){if(typeof r=="string")return q(r,t);var n={}.toString.call(r).slice(8,-1);return n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set"?Array.from(r):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(r,t):void 0}}function Xe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Je(r){return Me(r)||Ye(r)||se(r)||Xe()}function F(r){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(r)}function Ve(r,t){if(F(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var l=n.call(r,t||"default");if(F(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Ze(r){var t=Ve(r,"string");return F(t)=="symbol"?t:t+""}function We(r,t,n){return(t=Ze(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function qe(r){if(Array.isArray(r))return r}function Ge(r,t){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var l,d,E,v,y=[],g=!0,N=!1;try{if(E=(n=n.call(r)).next,t!==0)for(;!(g=(l=E.call(n)).done)&&(y.push(l.value),y.length!==t);g=!0);}catch(i){N=!0,d=i}finally{try{if(!g&&n.return!=null&&(v=n.return(),Object(v)!==v))return}finally{if(N)throw d}}return y}}function Qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(r,t){return qe(r)||Ge(r,t)||se(r,t)||Qe()}var er={root:"p-accordion p-component",accordiontab:{root:function(t){var n=t.selected;return K("p-accordion-tab",{"p-accordion-tab-active":n})},content:"p-accordion-content",header:function(t){var n=t.selected,l=t.getTabProp,d=t.tab;return K("p-accordion-header",{"p-highlight":n,"p-disabled":l(d,"disabled")})},headeraction:"p-accordion-header-link",headericon:"p-accordion-toggle-icon",headertitle:"p-accordion-header-text",toggleablecontent:"p-toggleable-content",transition:"p-toggleable-content"}},rr=`
@layer primereact {
    .p-accordion-header-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        user-select: none;
        position: relative;
        text-decoration: none;
    }
    
    .p-accordion-header-link:focus {
        z-index: 1;
    }
    
    .p-accordion-header-text {
        line-height: 1;
        width: 100%;
    }
}
`,z=ie.extend({defaultProps:{__TYPE:"Accordion",id:null,activeIndex:null,className:null,style:null,multiple:!1,expandIcon:null,collapseIcon:null,transitionOptions:null,onTabOpen:null,onTabClose:null,onTabChange:null,children:void 0},css:{classes:er,styles:rr}}),O=ie.extend({defaultProps:{__TYPE:"AccordionTab",className:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,style:null,tabIndex:0,children:void 0},getCProp:function(t,n){return H.getComponentProp(t,n,O.defaultProps)},getCProps:function(t){return H.getComponentProps(t,O.defaultProps)},getCOtherProps:function(t){return H.getComponentDiffProps(t,O.defaultProps)}});function oe(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);t&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),n.push.apply(n,l)}return n}function k(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oe(Object(n),!0).forEach(function(l){We(r,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach(function(l){Object.defineProperty(r,l,Object.getOwnPropertyDescriptor(n,l))})}return r}var le=function(){},ce=h.forwardRef(function(r,t){var n=Fe(),l=h.useContext(Ee),d=z.getProps(r,l),E=h.useState(d.id),v=ae(E,2),y=v[0],g=v[1],N=h.useState(d.activeIndex),i=ae(N,2),D=i[0],m=i[1],I=h.useRef(null),_=d.onTabChange?d.activeIndex:D,c=h.Children.count(d.children),b={props:d,state:{id:y,activeIndex:D}},x=z.setMetaData(k({},b)),j=x.ptm,de=x.ptmo,T=x.cx,ue=x.isUnstyled;Ue(z.css.styles,ue,{name:"accordion"});var p=function(e,o){return O.getCProp(e,o)},w=function(e,o,s){var u={parent:b,context:{index:s,count:c,first:s===0,last:s===c-1,selected:Y(s),disabled:p(e,"disabled")}};return n(j("tab.".concat(o),{tab:u}),j("accordiontab.".concat(o),{accordiontab:u}),j("accordiontab.".concat(o),u),de(p(e,"pt"),o,u))},me=function(e,o,s){G(e,o,s)},G=function(e,o,s){if(!p(o,"disabled")){var u=Y(s),C=null;if(d.multiple){var P=_||[];C=u?P.filter(function(R){return R!==s}):[].concat(Je(P),[s])}else C=u?null:s;var S=u?d.onTabClose:d.onTabOpen;S&&S({originalEvent:e,index:s}),d.onTabChange?d.onTabChange({originalEvent:e,index:C}):m(C)}e.preventDefault()},pe=function(e,o,s){switch(e.code){case"ArrowDown":fe(e);break;case"ArrowUp":he(e);break;case"Home":Q(e);break;case"End":ee(e);break;case"Enter":case"NumpadEnter":case"Space":be(e,o,s);break}},fe=function(e){var o=$(e.target.parentElement.parentElement);o?U(o):Q(e),e.preventDefault()},he=function(e){var o=M(e.target.parentElement.parentElement);o?U(o):ee(e),e.preventDefault()},Q=function(e){var o=ve();U(o),e.preventDefault()},ee=function(e){var o=ge();U(o),e.preventDefault()},be=function(e,o,s){G(e,o,s),e.preventDefault()},$=function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=o?e:e.nextElementSibling,u=A.findSingle(s,'[data-pc-section="header"]');return u?A.getAttribute(u,"data-p-disabled")?$(u.parentElement):A.findSingle(u,'[data-pc-section="headeraction"]'):null},M=function(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=o?e:e.previousElementSibling,u=A.findSingle(s,'[data-pc-section="header"]');return u?A.getAttribute(u,"data-p-disabled")?M(u.parentElement):A.findSingle(u,'[data-pc-section="headeraction"]'):null},ve=function(){return $(I.current.firstElementChild,!0)},ge=function(){return M(I.current.lastElementChild,!0)},U=function(e){e&&A.focus(e)},Y=function(e){return d.multiple&&Array.isArray(_)?_&&_.some(function(o){return o===e}):_===e};if(h.useImperativeHandle(t,function(){return{props:d,getElement:function(){return I.current}}}),Le(function(){y||g(Ie())}),!y)return null;var ye=function(e,o,s){var u=k(k({},p(e,"style")||{}),p(e,"headerStyle")||{}),C=y+"_header_"+s,P=y+"_content_"+s,S=p(e,"disabled")?-1:p(e,"tabIndex"),R=n({className:T("accordiontab.headertitle")},w(e,"headertitle",s)),L=O.getCProps(e),X=p(e,"headerTemplate")?H.getJSXElement(p(e,"headerTemplate"),L):h.createElement("span",R,H.getJSXElement(p(e,"header"),L)),J=n({"aria-hidden":"true",className:T("accordiontab.headericon")},w(e,"headericon",s)),Se=o?d.collapseIcon||h.createElement(Re,J):d.expandIcon||h.createElement(Be,J),_e=ke.getJSXIcon(Se,k({},J),{props:d,selected:o}),we=n({className:K(p(e,"headerClassName"),p(e,"className"),T("accordiontab.header",{selected:o,getTabProp:p,tab:e})),style:u,"data-p-highlight":o,"data-p-disabled":p(e,"disabled")},w(e,"header",s)),Ne=n({id:C,href:"#"+P,className:T("accordiontab.headeraction"),role:"button",tabIndex:S,onClick:function(V){return me(V,e,s)},onKeyDown:function(V){return pe(V,e,s)},"aria-disabled":p(e,"disabled"),"aria-controls":P,"aria-expanded":o},w(e,"headeraction",s));return h.createElement("div",we,h.createElement("a",Ne,_e,X))},xe=function(e,o,s){var u=k(k({},p(e,"style")||{}),p(e,"contentStyle")||{}),C=y+"_content_"+s,P=y+"_header_"+s,S=h.createRef(),R=n({id:C,ref:S,className:K(p(e,"contentClassName"),p(e,"className"),T("accordiontab.toggleablecontent")),style:u,role:"region","aria-labelledby":P},w(e,"toggleablecontent",s)),L=n({className:T("accordiontab.content")},w(e,"content",s)),X=n({classNames:T("accordiontab.transition"),timeout:{enter:1e3,exit:450},in:o,unmountOnExit:!0,options:d.transitionOptions},w(e,"transition",s));return h.createElement(ze,B({nodeRef:S},X),h.createElement("div",R,h.createElement("div",L,p(e,"children"))))},Ce=function(e,o){if(H.isValidChild(e,"AccordionTab")){var s=y+"_"+o,u=Y(o),C=ye(e,u,o),P=xe(e,u,o),S=n({key:s,className:T("accordiontab.root",{selected:u})},O.getCOtherProps(e),w(e,"root",o));return h.createElement("div",S,C,P)}return null},je=function(){return h.Children.map(d.children,Ce)},Te=je(),Pe=n({className:K(d.className,T("root")),style:d.style},z.getOtherProps(d),j("root"));return h.createElement("div",B({id:y,ref:I},Pe),Te)});le.displayName="AccordionTab";ce.displayName="Accordion";const gr=({csrf_token:r,visible:t,setVisible:n,categories:l,onChange:d=()=>{},products:E,toast:v})=>{var _;const y=He.createRef(),[g,N]=h.useState(!1),{values:i,handleChange:D,setFieldValue:m}=De({initialValues:{preorder:!1,order:0,sku:"",name:"",category:(_=l[0])==null?void 0:_.name,price:1,is_new:!1,is_discount:!1,is_tl:!0,is_active:!0,selectedCategory:l[0],selectedProduct:null,images:[]}}),I=()=>{if(i.sku.length===0){v.current.show({severity:"error",summary:"Hata",detail:"Stok Kodu Zorunludur!"});return}if(i.name.length===0){v.current.show({severity:"error",summary:"Hata",detail:"Ürün Adı Zorunludur!"});return}if(i.category.length===0){v.current.show({severity:"error",summary:"Hata",detail:"Kategori Zorunludur!"});return}if(i.price<=0){v.current.show({severity:"error",summary:"Hata",detail:"Fiyat 0 dan büyük olmalıdır!"});return}if(i.images.length===0){v.current.show({severity:"error",summary:"Hata",detail:"En Az Bir Resim Seçmelisiniz!"});return}if(i.preorder&&!i.selectedProduct){v.current.show({severity:"error",summary:"Hata",detail:"Önceden Sıralanacak Ürünü Seçmelisiniz!"});return}N(!0);let c=new FormData;c.append("sku",i.sku),c.append("name",i.name),c.append("category",i.category),c.append("price",i.price),c.append("is_new",i.is_new?1:0),c.append("is_discount",i.is_discount?1:0),c.append("is_tl",i.is_tl?1:0),c.append("is_active",i.is_active?1:0),i.preorder&&c.append("order",i.order),i.images.forEach((b,x)=>{c.append("images["+x+"]",b)}),fetch(route("products.store"),{method:"POST",headers:{"X-CSRF-TOKEN":r},body:c}).then(b=>b.json()).then(b=>{var x;b.status?(v.current.show({severity:"success",summary:"Başarılı",detail:b.message}),m("sku",""),m("name",""),m("category",(x=l[0])==null?void 0:x.name),m("price",1),m("is_new",!1),m("is_discount",!1),m("is_tl",!0),m("is_active",!0),m("images",[]),m("selectedCategory",l[0]),m("selectedProduct",null),d(b.products),n(!1)):v.current.show({severity:"error",summary:"Hata",detail:b.message})}).catch(b=>{v.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{N(!1)})};return a.jsx(a.Fragment,{children:a.jsx(Oe,{header:"Yeni Ürün Ekle",maximizable:!0,visible:t,style:{width:"50vw"},onHide:()=>n(!1),footer:a.jsxs(a.Fragment,{children:[a.jsx(W,{label:"Kapat",icon:"pi pi-times",size:"small",loading:g,severity:"secondary",onClick:()=>n(!1)}),a.jsx(W,{label:"Kaydet",icon:"pi pi-save",size:"small",loading:g,className:"p-button-success",onClick:I})]}),children:a.jsxs("div",{className:"p-fluid",children:[a.jsxs("div",{className:"mb-3 flex items-center",children:[a.jsx(Z,{inputId:"preorder",disabled:g,name:"preorder",onChange:c=>{m("preorder",c.checked)},checked:i.preorder}),a.jsx("label",{htmlFor:"preorder",className:"ml-3 font-bold",children:"Ürünü Önceden Sırala"})]}),i.preorder&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:"preorderProducts",className:"font-bold",children:["Hangi Ürünün Altına Koymak İstediğinizi Seçiniz ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(te,{disabled:g,inputId:"preorderProducts",options:E,optionLabel:"name",value:i.selectedProduct,filter:!0,showClear:!1,onChange:c=>{m("order",c.value.order),m("selectedProduct",c.value)}})]}),a.jsx(ne,{}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:"email",className:"font-bold",children:["Ürün Stok Kodu ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(re,{disabled:g,id:"email",type:"text",name:"sku",onChange:D,value:i.sku})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Ürün Adı ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(re,{disabled:g,id:"name",type:"text",name:"name",onChange:D,value:i.name})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:" ",className:"font-bold",children:["Ürün Kategorisi ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(te,{disabled:g,inputId:"category",options:l,optionLabel:"name",value:i.selectedCategory,filter:!0,showClear:!1,onChange:c=>{m("category",c.value.name),m("selectedCategory",c.value)}})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{htmlFor:"price",className:"font-bold",children:["Ürün Fiyatı ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),a.jsx(Ke,{disabled:g,inputId:"price",name:"price",mode:"currency",currency:i.is_tl?"TRY":"USD",min:0,onChange:c=>{m("price",c.value)},value:i.price})]}),a.jsxs("div",{className:"mb-3 flex items-center",children:[a.jsx(Z,{disabled:g,inputId:"is_new",name:"is_new",onChange:c=>{m("is_new",c.checked)},checked:i.is_new}),a.jsxs("label",{htmlFor:"is_new",className:"ml-3 font-bold",children:["Yeni Ürün ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]})]}),a.jsxs("div",{className:"mb-3 flex items-center",children:[a.jsx(Z,{disabled:g,inputId:"is_discount",name:"is_discount",onChange:c=>{m("is_discount",c.checked)},checked:i.is_discount}),a.jsxs("label",{htmlFor:"is_discount",className:"ml-3 font-bold",children:["İndirimli Ürün ",a.jsx("span",{className:"font-semibold text-red-400",children:"*"})]})]}),a.jsx(ne,{}),a.jsxs("div",{className:"mb-3",children:[a.jsx(W,{disabled:g,label:i.images.length>0?`${i.images.length} Adet Resim Seçili`:"Ürün Resimlerini Seçin",icon:"pi pi-image",type:"button",severity:i.images.length>0?"success":"info",onClick:()=>{y.current.click()}}),a.jsx("input",{type:"file",name:"files",id:"files",onChange:c=>{let b=c.target.files,x=[];for(let j=0;j<b.length;j++)b[j].type.includes("image")&&x.push(b[j]);x.length===0&&v.current.show({severity:"warn",summary:"Hata",detail:"Lütfen Sadece Resim Veya Video Dosyaları Seçiniz."}),m("images",x)},accept:"image/*,video/*",style:{display:"none"},multiple:!0,ref:y})]}),a.jsx(ce,{className:"mb-3",hidden:!i.images.length>0,children:a.jsx(le,{header:"Seçili Resimler ("+i.images.length+")",children:a.jsx("div",{className:"grid grid-cols-2 gap-3 lg:grid-cols-3",children:i.images.map((c,b)=>a.jsx($e,{src:URL.createObjectURL(c),alt:"Resim",preview:!0,className:"w-full h-full"},b))})})})]})})})};export{gr as default};
